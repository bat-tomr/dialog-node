<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8" />
    <title>Test fetch</title>
  </head>
  <body>
    <h2>Test fetch</h2>

    <form>
      <input name="abc" />
      <input name="def" type="hidden" value="testing123" />

      <input type="submit" />
    </form>
    <script>
      /* eslint-disable no-console */
      /* eslint-env browser */
      document.querySelector('form').addEventListener('submit', async function (e) {
        e.preventDefault();
        console.log('Params', new URLSearchParams(new FormData(this)).toString());
        const response = await fetch('/', {
          method: 'POST',
          body: new URLSearchParams(new FormData(this)).toString(),
          headers: {
            'Content-Type': 'application/x-www-form-urlencoded'
          }
        });
        console.log('sent');
        console.log('response', await response.text());
      });
    </script>
  </body>
</html>
